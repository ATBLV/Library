console.log("TITLE: Project:- Library ");

let myLibrary = [
    { 'title': 'Book 1', 'author': 'Author 1', 'Pages': '123', 'Status': 'True' },
    { 'title': 'Book 2', 'author': 'Author 2', 'Pages': '231', 'Status': 'True' },
    { 'title': 'Book 3', 'author': 'Author 3', 'Pages': '312', 'Status': 'True' },
];

function Book(title, author, pages, read) {
    this.title = title;
    this.author = author;
    this.pages = pages;
    this.read = read;
}

let bookInfo = new Book('title', 'author', 'pages','read');
console.log("BOOKINFO: ",bookInfo);

function addBookToLibrary(entry) {

    // myLibrary.push(bookInfo);

    myLibrary.push(entry);
    generateTable();
    bookInfo = new Book('', '', '','');
    // let bookInfo = new Book('', '', '','');

    // document.getElementById("form_input").reset();
    document.getElementById("book_input").focus();
}


// borrowed and adapted from https://developer.mozilla.org/en-US/docs/Web/API/Document_Object_Model/Traversing_an_HTML_table_with_JavaScript_and_DOM_Interfaces

function generateTable() {
    const tbl = document.createElement("table");
    const tblBody = document.createElement("tbody");

    tbl.setAttribute("class", "table table-hover");
    for (let i = 0; i < myLibrary.length; i++) {
        const row = document.createElement("tr");
        let cell = document.createElement("th");
        // cell.style = "width: 10%;";
        // cell.className = 'th_col_1';
        cellText = document.createTextNode(i + 1);
        cell.appendChild(cellText);
        row.appendChild(cell);

        for (const [key, value] of Object.entries(myLibrary[i])) {
            cell = document.createElement("td");
            cellText = document.createTextNode(value);
            cell.appendChild(cellText);
            row.appendChild(cell);
        }
        // add the row to the end of the table body
        cell = document.createElement('td');
        cell.appendChild(generateButton());
        row.appendChild(cell);
        tblBody.appendChild(row);

    }
    // put the <tbody> in the <table>
    tbl.appendChild(tblBody);
    // appends <table> into <body>
    document.getElementById("created_table").replaceChildren(tbl);
}

function generateButton() {
    let button = document.createElement('button');
    button.type = 'button';
    button.innerHTML = 'Delete';
    button.className = 'btn generated_buttons';

    return button;
};

generateTable();



document.getElementById("book_input").addEventListener('keydown', (event) => {
    const keyName = event.key;
    if (event.key === 'Enter') {
        event.preventDefault();
        bookInfo.title = document.getElementById("book_input").value;
        console.log("BOOK INFO: TITLE: ", bookInfo);
        document.getElementById("author_input").focus();
    }
});

document.getElementById("author_input").addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {
        event.preventDefault();
        bookInfo.author = document.getElementById("author_input").value;
        console.log("BOOK INFOR: AUTHOR: ", bookInfo.author);
        document.getElementById("pages_input").focus();
    }
});

document.getElementById("pages_input").addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {
        event.preventDefault();                                         // prevents reload of page
        bookInfo.pages = document.getElementById("pages_input").value;
        console.log(("BOOK INFO: PAGES: ", bookInfo.pages));
        document.getElementById("read_input").focus();
    }
});

document.getElementById("read_input").addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {
        event.preventDefault();                                         // prevents reload of page
        bookInfo.read = document.getElementById("read_input").value;
        console.log(("BOOK INFO: READ: ", bookInfo.read));
        document.getElementById("submit_button").focus();
    }
});


document.getElementById("submit_button").addEventListener('keydown', (event) => {
    if (event.key === 'Enter') {
        // if (event.key === 'Enter'||event.mouse) {
        event.preventDefault();                                         // prevents reload of page
        console.log("BOOK INFO: RECORD", bookInfo);
        console.log(document.querySelectorAll('input'));
        console.log(document.querySelectorAll('input.attributes'));
        // console.log(document.querySelectorAll('input[values]'));
        addBookToLibrary(bookInfo);
    }

});

document.getElementById("submit_button").addEventListener('mouseup', (event) => {
    event.preventDefault();
    console.log("CLICKED");
    addBookToLibrary(bookInfo);

});